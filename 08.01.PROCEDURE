STORED PROCEDURES:-
--------------------------
ðŸ”¹ A Stored Procedure is a named block of SQL and PL/SQL statements.
ðŸ”¹ Once created, it is saved permanently in the database. 
ðŸ”¹ It is precompiled and stored in advance, so execution is faster.
ðŸ”¹ It can accept parameters: 
      ðŸ”¹ IN â†’ Used to pass input values
      ðŸ”¹ OUT â†’ Used to return output values
      ðŸ”¹ IN OUT â†’ Used for both input and output 
ðŸ”¹ It can perform tasks such as INSERT, UPDATE, DELETE, and SELECT.
ðŸ”¹ It may or may not return a value.
ðŸ”¹ It is reusable â€“ once written, it can be executed multiple times without rewriting the code.

Advantages of Stored Procedure

ðŸ”¹ Reusable â€“ Write the procedure once and use it in multiple programs without rewriting code
ðŸ”¹ Faster Execution â€“ Precompiled in the database, so it runs faster than normal SQL statements
ðŸ”¹ Improved Security â€“ Users access data only through the procedure, preventing unauthorized table access
ðŸ”¹ Easy Maintenance â€“ Update the logic in one place, and changes apply wherever the procedure is used
ðŸ”¹ Reduced Network Traffic â€“ Only procedure calls are sent over the network, saving bandwidth
ðŸ”¹ Consistency â€“ Ensures the same business logic is applied every time, reducing errors


--------------------------

Procedures are created to perform one or more DML operations (INSERT, UPDATE, DELETE, SELECT) on the database.
A Procedure has 2 parts:
Procedure Specification (Header) â€“ Specifies the name of the procedure and the type of parameters.
Procedure Body â€“ Contains the actual code to perform the required tasks.

Syntax

CREATE [OR REPLACE] PROCEDURE procedure_name
(
   param1 MODE datatype,   -- MODE = IN, OUT, IN OUT (optional)
   param2 MODE datatype
)
IS/AS
 varciable, cursor , exception..etc
BEGIN
   -- SQL / PL/SQL statements to perform tasks
EXCEPTION
   WHEN others THEN
      -- Handle errors (optional)
END [procedure_name];
/

Explaination 
ðŸ”¹ CREATE PROCEDURE â†’ Creates a new procedure in the database
ðŸ”¹ [OR REPLACE] â†’ Optional; replaces the existing procedure if it already exists
ðŸ”¹ procedure_name â†’ Name of your procedure
ðŸ”¹ MODE â†’ Replace with IN, OUT, or IN OUT
      ðŸ”¹ IN â†’ Pass input value into the procedure
      ðŸ”¹ OUT â†’ Return value from the procedure
      ðŸ”¹ IN OUT â†’ Pass value in and get output value back
ðŸ”¹ IS / AS â†’ Used to start the procedure block
ðŸ”¹ You can declare local variables
ðŸ”¹ You can declare cursors for fetching rows from tables
ðŸ”¹ BEGIN â€¦ END â†’ Main executable section where SQL or PL/SQL statements are written
ðŸ”¹ EXCEPTION [Optional] â†’ Handles runtime errors that may occur in the procedure
ðŸ”¹ END [procedure_name] â†’ Marks the end of the procedure

*****************************************************

EXECUTING A PROCEDURE
---------------------

Method 1: Using EXEC or EXECUTE command

syntax :
    EXEC[UTE] PROCEDURENAME(ACTUAL PARAMETERS);

****************************

ðŸ”¹ Method 2: Using an Anonymous PL/SQL Block

syntax :

     BEGIN
        procedure_name(actual_parameters);
     END;
     /
***************************

ðŸ”¹ Method 3: Using the CALL statement
syntax :
      CALL procedure_name(actual_parameters);

***************************************************

Dropping a Procedure
syntax :
      DROP PROCRDURE PROCEDURE_NAME;

*****************************************************

HOW TO DISPLAY THE WHOLE PROCEDURE

SELECT TEXT
FROM USER_SOURCE
WHERE NAME='PROCEDURE_NAME';

PROCEDURE_NAME â†’ Replace with the name of the procedure you want to view
*****************************************************

EXAMPLE :
----------
ðŸ”¹ Write a stored procedure named GREETING that displays the message â€œWelcome to TestYantraâ€

CREATE OR REPLACE PROCEDURE GREETING
IS
BEGIN
DBMS_OUTPUT.PUT_LINE('Welcome to TestYantra');
END ;
/

SQL> EXEC GREETING();

OUTPUT:
------------
Welcome to TestYantra

*************************************
ðŸ”¹ Write a stored procedure named GREETING that accepts a parameter p_name (VARCHAR) and displays â€œWelcome to TestYantra <p_name>â€. Execute it with your name.

CREATE OR REPLACE PROCEDURE GREETING(p_name varchar)
IS
BEGIN
DBMS_OUTPUT.PUT_LINE('Welcome to TestYantra '||p_name);
END ;
/

SQL> EXEC GREETING('Dharma');

OUTPUT:
------------
Welcome to TestYantra Dharma

Notes: whenever you pass the data types dont pass the size of the datatypes .

*************************************
ðŸ”¹ WRITE A PLSQL STORE PROCEDURE FOR PASSING THE EMPNO AS PARAMETER AND
   DISPLAY NAME AND SALARY OF THE EMPLOYEES.

CREATE OR REPLACE PROCEDURE GET_EMP_DETAILS(p_empno NUMBER)
IS
    v_name VARCHAR2(20);
    v_sal  NUMBER;
BEGIN
    SELECT ename, sal
    INTO v_name, v_sal
    FROM emp
    WHERE empno = p_empno;

    DBMS_OUTPUT.PUT_LINE(v_name || ', ' || v_sal);

EXCEPTION
    WHEN NO_DATA_FOUND THEN
        RAISE_APPLICATION_ERROR(-20143, 'Invalid Employee Number');
END GET_EMP_DETAILS;
/


*************************************
ðŸ”¹WRITE A PLSQL STORE PROCEDURE FOR PASSING THE DEPTNO AS PARAMETER AND 
  DISPLAY NAME AND SALARY AND DEPTNO  OF THE EMPLOYEES CORRESPONDING TO THE DEPTNO.

CREATE OR REPLACE PROCEDURE GET_EMP_BY_DEPT(p_deptno INT)
IS
    i EMP%ROWTYPE;
    CURSOR c1 IS
        SELECT * FROM EMP
        WHERE deptno = p_deptno;
BEGIN
    OPEN c1;
    LOOP
        FETCH c1 INTO i;
        EXIT WHEN c1%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE(i.ename || ', ' || i.sal || ', ' || i.deptno);
    END LOOP;
    CLOSE c1;
END GET_EMP_BY_DEPT;
/


*************************************
ðŸ”¹WRITE A PLSQL STORE PROCEDURE to insert the record into the dept table 
  and the column name are deptno,dname ,loc 

CREATE OR REPLACE PROCEDURE INSERT_DEPT_RECORD(
    p_deptno IN DEPT.DEPTNO%TYPE,
    p_dname  IN DEPT.DNAME%TYPE,
    p_loc    IN DEPT.LOC%TYPE
)
IS
BEGIN
    INSERT INTO DEPT(DEPTNO, DNAME, LOC)
    VALUES(p_deptno, p_dname, p_loc);

    DBMS_OUTPUT.PUT_LINE('Record inserted successfully');
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END INSERT_DEPT_RECORD;
/
