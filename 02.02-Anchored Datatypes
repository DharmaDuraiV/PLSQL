Anchored Datatypes / VARIABLE ATTRIBUTES 
-----------------------------------------

What are Anchored Datatypes?
 üî∏ Anchored datatypes allow a variable to automatically take its datatype from a database column or another variable.
 üî∏ Variable attributes are used instead of explicitly specifying a data type when declaring variables or parameters
 üî∏ They help in automatically matching the datatype of a variable with a table column
 üî∏ This makes the code more flexible and maintainable
 üî∏ Types of Variable Attributes:
      PL/SQL supports two types of variable attributes:
     üî∏  %TYPE
     üî∏ %ROWTYPE
     üî∏ RECORDS

Why Anchored Datatypes?
------------------------
  üî∏ They solve real-time problems like:
  üî∏ Column datatype changes
  üî∏ Length changes (VARCHAR2 size)
  üî∏ Precision/scale changes

1Ô∏è‚É£ %TYPE Attribute

üî∏ Column-level attributes allow us to declare a variable with the same data type as a column in a database table.
üî∏ This is useful when we want to ensure that the variable matches the column's datatype exactly.
üî∏ It is done using the %TYPE attribute.

‚úÖ Key Points:
   üî∏  %TYPE is used to copy the datatype of a specific column.
   üî∏  Helps avoid datatype mismatch errors.

üìå Syntax:

   	Variable_Name Table_Name.Column_Name%TYPE;

EXAMPLE:

 WRITE A PL/SQL PROGRAM TO DISPLAY THE NAME AND SALRY OF THE EMPLOYEES IF THE EMPNO IS 7369.

DECLARE 
   V_NAME EMP.ENAME%TYPE ;
   V_SAL EMP.SAL%TYPE ;
BEGIN 
    SELECT ENAME ,SAL INTO V_NAME ,V_SAL 
    FROM EMP 
    WHERE EMPNO= 7369 ;
       DBMS_OUTPUT.PUT_LINE(V_NAME || ' ' || V_SAL);
END ;
/



-------------------------------------------------------------------------------------------------------------------
What is a RECORD?
   üî∏A RECORD is a composite datatype in PL/SQL that allows you to group different fields (columns/variables) into a single unit, similar to a row in a table.

Why Use RECORD?

  üî∏ Combine related data (empno, ename, sal) into one variable
  üî∏ Cleaner and readable code
  üî∏ Pass multiple values together
  üî∏ Useful when working with cursors & queries

Types of RECORDS in PL/SQL

1Ô∏è‚É£ User-defined RECORD
2Ô∏è‚É£ %ROWTYPE RECORD (Anchored record)


User-Defined RECORD (Custom Structure)
Syntax
TYPE record_type_name IS RECORD (
  field1 datatype,
  field2 datatype,
  field3 datatype
);

record_variable record_type_name;

------------------------------------------------
1Ô∏è‚É£ RECORD with Basic Datatypes

Example 1: User-Defined RECORD
-------------------------------
DECLARE
  TYPE student_rec IS RECORD (
    roll_no   NUMBER,
    name      VARCHAR2(20),
    marks     NUMBER(5,2),
    is_pass   BOOLEAN
  );

  v_student student_rec;
BEGIN
  v_student.roll_no := 1;
  v_student.name    := 'Ravi';
  v_student.marks   := 78.50;
  v_student.is_pass := TRUE;

  DBMS_OUTPUT.PUT_LINE(
    v_student.roll_no || ' ' ||
    v_student.name || ' ' ||
    v_student.marks
  );
END;
/

------------------------------------------------
2Ô∏è‚É£ Using %TYPE in Record Fields (Best Practice)

This keeps your code table-dependent safe.

DECLARE
  TYPE emp_rec_type IS RECORD (
    emp_id   emp.empno%TYPE,
    emp_name emp.ename%TYPE,
    salary   emp.sal%TYPE
  );

  v_emp emp_rec_type;
BEGIN
  v_emp.emp_id := 7369;
  v_emp.emp_name := 'SMITH';
  v_emp.salary := 800;
END;
/

------------------------------------------------

3Ô∏è‚É£  RECORD with Anchored Datatypes (%TYPE)

DECLARE
  TYPE emp_rec_type IS RECORD (
    empno emp.empno%TYPE,
    ename emp.ename%TYPE,
    sal   emp.sal%TYPE
  );

  v_emp emp_rec_type;
BEGIN
  SELECT empno, ename, sal
  INTO v_emp
  FROM emp
  WHERE empno = 7369;

  DBMS_OUTPUT.PUT_LINE(v_emp.ename || ' - ' || v_emp.sal);
END;
/

 ‚ö†Ô∏è  Hint :  Order of columns must match record fields
------------------------------------------------

4Ô∏è‚É£ %ROWTYPE RECORD (Table-Based)

Syntax
record_variable table_name%ROWTYPE;

-----------------------------
DECLARE
  v_emp emp%ROWTYPE;
BEGIN
  SELECT *
  INTO v_emp
  FROM emp
  WHERE empno = 7369;

  DBMS_OUTPUT.PUT_LINE(
    v_emp.ename || ' works as ' || v_emp.job
  );
END;
/
---------------------------------------------------------------------------------------------------

3Ô∏è‚É£   %ROWTYPE Attribute

 üî∏ A row‚Äëlevel attribute declares a record variable that can hold an entire row fetched from a table
 üî∏ It is specified using the %ROWTYPE attribute.

üìå Syntax:

    variable_name table_name%ROWTYPE;

EXAMPLE :

Write a pl/sql programm to display name ,job and salary of the employe get the values from user as empno.

DECLARE 
    I EMP%ROWTYPE ;
BEGIN 
   SELECT ENAME,JOB,SAL INTO I.ENAME ,I.JOB,I.SAL
   FROM EMP 
   WHERE EMPNO=&NO ;
     DBMS_OUTPUT.PUT_LINE(I.ENAME || ' ' || I.JOB ||' '  || I.SAL);
END ;
/

Write a pl/sql programm to display name ,job and salary of the employe get the values from user as empno.
EXAMPLE :
DECLARE 
    I EMP%ROWTYPE ;
BEGIN 
    SELECT * INTO I
    FROM EMP 
    WHERE EMPNO=&NO ;
      DBMS_OUTPUT.PUT_LINE(I.ENAME || ' ' || I.JOB ||' '  || I.SAL);
END ;
/


Assignments :

1. Write a PL/SQL anonymous block that, given an EMPNO substitution variable, declares %TYPE variables and displays the employee‚Äôs name and salary.
2. Develop a PL/SQL block which, for a provided EMPNO, declares a EMP%ROWTYPE record and outputs the employee‚Äôs name, job title, and hire date.
3. Create a PL/SQL program that accepts an EMPNO, retrieves the employee‚Äôs salary into a %TYPE variable, increases it by 10%, and then displays the updated salary.
4. Write a PL/SQL anonymous block to fetch‚Äîand display‚Äîthe department number and job title of the employee identified by a given EMPNO, using %TYPE variables.
5. Implement a PL/SQL block that prompts for an EMPNO, declares an EMP%ROWTYPE record, retrieves all columns for that employee, and displays the complete row.
6. Develop a PL/SQL program that, for a specified EMPNO, checks whether the employee earns more than 2000 and their name ends with ‚ÄòKE‚Äô; if both conditions are true, display their name and salary.
7. Write a PL/SQL block that, given an EMPNO, declares %TYPE variables to retrieve and display the employee‚Äôs name and commission only if their commission equals 1400.
8. Create a PL/SQL anonymous block that prompts for an EMPNO, retrieves the monthly salary into a %TYPE variable, calculates the annual salary , and displays the result .
9. Construct a PL/SQL block that, for a provided EMPNO, declares %TYPE variables to fetch and print the employee‚Äôs name and manager ID (MGR).


| Feature       |  %TYPE                   |  %ROWTYPE        |
| ------------- | ------------------------ | ---------------- |
| Anchors to    | Single column / variable | Entire row       |
| Memory        | Low                      | Higher           |
| Flexibility   | High                     | Less             |
| Used when     | Few columns              | All columns      |
| Real-time use | Very common              | Cursor-based ops |




